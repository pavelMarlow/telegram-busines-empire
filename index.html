<!-- index.html –¥–ª—è Web App -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–µ—Ä–≤–∏—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        .header p {
            opacity: 0.8;
        }
        .button {
            display: block;
            width: 100%;
            padding: 18px 20px;
            margin: 15px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            border-color: rgba(255, 255, 255, 0.3);
        }
        .button-icon {
            margin-right: 10px;
            font-size: 24px;
        }
        .back-button {
            display: inline-block;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            text-decoration: none;
            margin-top: 20px;
        }
        .device-list {
            display: grid;
            gap: 10px;
        }
        .device-item {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .price {
            float: right;
            font-weight: bold;
            color: #4ade80;
        }
    </style>
</head>
<body>
    <div class="container" id="app">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu">
            <div class="header">
                <h1>üîì –°–µ—Ä–≤–∏—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—É—é —É—Å–ª—É–≥—É</p>
            </div>
            
            <button class="button" onclick="showUnlockMenu()">
                <span class="button-icon">üì±</span> –ö—É–ø–∏—Ç—å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É
            </button>
            
            <button class="button" onclick="showKeyMenu()">
                <span class="button-icon">üîë</span> –ö—É–ø–∏—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
            </button>
            
            <a href="https://t.me/tech_support_chat" class="button">
                <span class="button-icon">üÜò</span> –ü–æ–¥–¥–µ—Ä–∂–∫–∞
            </a>
        </div>

        <!-- –ú–µ–Ω—é —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ -->
        <div id="unlock-menu" style="display: none;">
            <div class="header">
                <h1>üì± –í—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</p>
            </div>
            
            <button class="button" onclick="showDeviceList('iphone')">
                <span class="button-icon">üì±</span> iPhone
            </button>
            
            <button class="button" onclick="showDeviceList('ipad')">
                <span class="button-icon">üíª</span> iPad
            </button>
            
            <button class="back-button" onclick="backToMain()">¬´ –ù–∞–∑–∞–¥</button>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
        <div id="device-list" style="display: none;">
            <div class="header">
                <h1 id="device-list-title">–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h1>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å</p>
            </div>
            
            <div class="device-list" id="devices-container">
                <!-- –£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <button class="back-button" onclick="backToUnlockMenu()">¬´ –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script>
        // Telegram Web App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.hide();
        
        // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        let currentState = 'main';
        let selectedDeviceType = '';
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
        function showUnlockMenu() {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('unlock-menu').style.display = 'block';
            currentState = 'unlock';
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –∫–ª—é—á–∞
        function showKeyMenu() {
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –≤—ã–±–æ—Ä—É —Å—Ä–æ–∫–∞
            // –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥—É—é —Ñ–æ—Ä–º—É
            tg.showAlert('–î–ª—è –ø–æ–∫—É–ø–∫–∏ –∫–ª—é—á–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤ —á–∞—Ç–µ —Å –±–æ—Ç–æ–º');
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        function showDeviceList(type) {
            selectedDeviceType = type;
            const title = document.getElementById('device-list-title');
            title.textContent = type === 'iphone' ? 'üì± iPhone' : 'üíª iPad';
            
            document.getElementById('unlock-menu').style.display = 'none';
            document.getElementById('device-list').style.display = 'block';
            currentState = 'device-list';
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ API)
            loadDevices(type);
        }
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        function loadDevices(type) {
            const container = document.getElementById('devices-container');
            container.innerHTML = '';
            
            // –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ fetch –∫ –≤–∞—à–µ–º—É API)
            const devices = {
                'iphone': [
                    {model: 'iPhone 5', price: 3000},
                    {model: 'iPhone 6', price: 4500},
                    {model: 'iPhone 7', price: 6000},
                    {model: 'iPhone 8', price: 7500},
                    {model: 'iPhone X', price: 9000},
                    {model: 'iPhone 11', price: 10500},
                    {model: 'iPhone 12', price: 12000},
                    {model: 'iPhone 13', price: 13500},
                    {model: 'iPhone 14', price: 15000},
                    {model: 'iPhone 15', price: 16500}
                ],
                'ipad': [
                    {model: 'iPad Air 2', price: 5000},
                    {model: 'iPad 6th Gen', price: 6500},
                    {model: 'iPad Pro 11"', price: 12000},
                    {model: 'iPad Mini 6', price: 8500}
                ]
            };
            
            devices[type].forEach((device, index) => {
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ü–µ–Ω—É –Ω–∞ 1500 –¥–ª—è –∫–∞–∂–¥–æ–π —Å–ª–µ–¥—É—é—â–µ–π –º–æ–¥–µ–ª–∏
                const finalPrice = device.price + (index * 1500);
                
                const div = document.createElement('div');
                div.className = 'device-item';
                div.innerHTML = `
                    ${device.model}
                    <span class="price">${finalPrice} ‚ÇΩ</span>
                `;
                div.onclick = () => selectDevice(device.model, finalPrice);
                container.appendChild(div);
            });
        }
        
        // –í—ã–±—Ä–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
        function selectDevice(model, price) {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
            const data = {
                action: 'select_device',
                device: model,
                price: price,
                type: selectedDeviceType
            };
            
            tg.sendData(JSON.stringify(data));
            tg.close();
        }
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥
        function backToMain() {
            document.getElementById('unlock-menu').style.display = 'none';
            document.getElementById('device-list').style.display = 'none';
            document.getElementById('main-menu').style.display = 'block';
            currentState = 'main';
        }
        
        function backToUnlockMenu() {
            document.getElementById('device-list').style.display = 'none';
            document.getElementById('unlock-menu').style.display = 'block';
            currentState = 'unlock';
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –±–æ—Ç–∞
        tg.onEvent('webAppDataReceived', (event) => {
            console.log('Data received:', event);
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        tg.ready();
    </script>
</body>
</html>
